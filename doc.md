<!-- Generated by documentation.js. Update this documentation by updating the source code. -->

### Table of Contents

-   [debug][1]
    -   [Examples][2]
-   [delay][3]
    -   [Parameters][4]
    -   [Examples][5]
-   [executeWhenUnresponsive][6]
    -   [Parameters][7]
    -   [Examples][8]
-   [ignoreRejectionFor][9]
    -   [Parameters][10]
    -   [Examples][11]
-   [ignoreReturnFor][12]
    -   [Parameters][13]
    -   [Examples][14]
-   [inBackground][15]
    -   [Parameters][16]
    -   [Examples][17]
-   [invert][18]
    -   [Parameters][19]
    -   [Examples][20]
-   [parallelObject][21]
    -   [Parameters][22]
    -   [Examples][23]
-   [parallel][24]
    -   [Parameters][25]
-   [createProcessingStack][26]
-   [queue][27]
    -   [Parameters][28]
    -   [Examples][29]
-   [rethrowCommonErrors][30]
    -   [Parameters][31]
    -   [Examples][32]
-   [rethrowError][33]
    -   [Parameters][34]
    -   [Examples][35]
-   [rethrowIfOneOf][36]
    -   [Parameters][37]
    -   [Examples][38]
-   [retry][39]
    -   [Parameters][40]
    -   [Examples][41]
-   [sequence][42]
    -   [Parameters][43]
    -   [Examples][44]
-   [timeoutAfter][45]
    -   [Parameters][46]
    -   [Examples][47]
-   [waitAtLeastSeconds][48]
    -   [Parameters][49]
-   [withProgress][50]
    -   [Parameters][51]
    -   [Examples][52]

## debug

Logs the current value of a promise chain to the console and continues with the chain.

### Examples

```javascript
import { debug } from 'promise-frites';

Promise.resolve()
 .then(() => 'my value')
 .then(debug) // Logs to 'my value' console
 .then((value) => value === 'my value');
```

## delay

Waits at least given amount of seconds before the promise is resolved.
Might be used if you need to show a loading screen (eg. fetching GPS) but
don't want to it flicker when user has GPS rejected.

### Parameters

-   `seconds` **[number][53]** , number of seconds to wait before the promise is resolved.

### Examples

```javascript
import { delay } from 'promise-frites';

const arbitaryDelay = delay(1);

Promise.resolve()
  .then(arbitaryDelay(() => 'a very fast resolving promise'))
```

## executeWhenUnresponsive

Executes given functions after a specified time, when the promise takes long to resolve.
This function might be used to change the text on a loading page, so that the user knows
that the app is still doing something.

### Parameters

-   `executionList` **[object][54]** object of keys(seconds when to execute) and value is a function

### Examples

```javascript
const shortDelay = 0.5; // seconds
const notifyUserOnLongRequest = executeWhenUnresponsive({
  [shortDelay]: () => { console.log('Hold on!'); },
  [shortDelay * 2]: () => { console.log('Almost there!'); },
  [shortDelay * 10]: () => { console.log('For some reason this takes some time!'); },
  finally: () => { console.log('We made it'); }, // might be used as a teardown fn.
});

const apiCall = () => Promise.resolve();
Promise.resolve()
  .then(notifyUserOnLongRequest(apiCall))
  .then((result) => console.log(`API call responded ${result}`));
```

## ignoreRejectionFor

Ignores if the given function throws an error or not and returns the value.

### Parameters

-   `fn`  

### Examples

```javascript
import { ignoreRejectionFor } from 'promise-frites';

const logToRemote = () => Promise.reject('Api Error');
Promise.resolve()
  .then(ignoreRejectionFor(logToRemote))
  .then((value) => assertThat(value, equalTo('Api Error')));
```

## ignoreReturnFor

Ignores the return value of a given function and returns the value of the
previous function instead.

### Parameters

-   `fn`  

### Examples

```javascript
import { ignoreReturnFor } from 'promise-frites';

Promise.resolve()
  .then(() => '1 value')
  .then(ignoreReturnFor(() => '2 value'))
  .then((value) => value === '1 value')); // true
```

## inBackground

Doesn't wait for the promise to be resolved and continues with the promise chain.

### Parameters

-   `fn`  , function to be run in the background

### Examples

```javascript
import { inBackground } from 'promise-frites';

const logRemote = () => { // log something to a remote logging service };
Promise.resolve()
  .then(inBackground(logRemote))
  .then(() => console.log('I won\'t wait for logRemote'));
```

## invert

Inverts a promise.
Resolved will be converted to rejected.
Rejected will be converted to resolved.

### Parameters

-   `fn`  

### Examples

```javascript
const callWeiredApi = (args) => Promise.resolve()
 .then(invert(() => fetch('something/weired'));
```

## parallelObject

Executes given promises in parallel and returns the values in an object

### Parameters

-   `objectOrArray`  , an object or array containing promises or functions which return promises
-   `options`  , { batchSize } defines how many promises are executed in parallel (only works
     if functions are used in the given objects). This option is usefull when one wants to throttle
     the amount of parallel connections to an API. (optional, default `{}`)

### Examples

```javascript
import { parallelObject } from 'promise-frites';

const values = await parallelObject({
 first: Promise.resolve(1),
 second: Promise.resolve(2),
}); // => {first: 1, second: 2}
```

```javascript
import { parallelObject } from 'promise-frites';

// Only two elements will be resolved in parallel
const values = await parallelObject({
 first: () => Promise.resolve(1),
 second: () => Promise.resolve(2),
 // ...
}, { batchSize: 2 }); // => {first: 1, second: 2}
```

```javascript
import { parallelObject } from 'promise-frites';

// Only two elements will be resolved in parallel
const values = await parallelObject([
 Promise.resolve(1),
 Promise.resolve(2),
 // ...
], { batchSize: 2 }); // => {first: 1, second: 2}
```

## parallel

Executes all functions in parallel. (Simple wrapper around Promise.all)

### Parameters

-   `fns` **...any** , a list of functions to be executed in parallel

## createProcessingStack

Executes all enqueued functions sequentially.

## queue

Executes a list of promises and waits before previous promise was resolved.
In difference to sequence, queue responds an array containing all resolved values.

### Parameters

-   `fns` **[array][55]** , functions to be executed

### Examples

```javascript
const analyticsEvents = ['UserCreated', 'InvitationEmailSent']
  .map((event) => () => { 'send a single event to google analytics' });

Promise.resolve()
  .then(queue(...analyticsEvents))
  .then(([responseOfUserCreated, responseOfInvitationEmailSent]) =>
    console.log('All events have been stored.'));
```

## rethrowCommonErrors

Rethrows common errors like SyntaxError or ReferenceError.

### Parameters

-   `fn` **[function][56]** , a promise

### Examples

```javascript
import { rethrowCommonErrors } from 'promise-frites';

Promise.resolve()
  .then(() => x) // ReferenceError: x is not defined
  .catch(rethrowCommonErrors(notifyUser))
  .catch(rethrowCommonErrors(logError));
```

## rethrowError

Rethrows an error catched in a catch block.
Might be used to log the error to the console and continue with the regular error handling.

### Parameters

-   `fn` **[function][56]** 

### Examples

```javascript
import { rethrowError } from 'promise-frites';

const logError = (error) => console.error(error);
const displayErrorOnScreen = (error) => { // some magic };

Promise.resolve()
  .then(() => { throw 'something unexpected'; })
  .catch(rethrowError(logError))
  .catch(displayErrorOnScreen);
```

## rethrowIfOneOf

Rethrows an error if it is an instance of a given list of errors.

### Parameters

-   `errors` **[number][53]** , array of errors

### Examples

```javascript
import { rethrowIfOneOf } from 'promise-frites';

const rethrowMyErrors = rethrowIfOneOf(MyCustomError1, MyCustomError2);
const logError = () => {};
const notifyUser = () => {};

Promise.resolve()
  .then(myBrokenFunction)
  .catch(rethrowMyErrors(notifyUser))
  .catch(logError);
```

## retry

Retries a promise n times. When a retry exceeds the max retry times this function
throws a Retry error. This error has a property `errors` which is an array containing
all errors thrown.

### Parameters

-   `times` **[number][53]** the number of retries until the promise fails

### Examples

```javascript
import { retry } from 'promise-frites';

const error = new Error('API example error');
const apiCall = () => { throw error };
const retry3Times = retry(3);
Promise.resolve()
 .then(retry3Times(apiCall))
 .then((value) => console.log(value))
 .catch((retryError) => {
   console.log(retryError.errors[0] === error); // true
   console.log(retryError.errors[1] === error); // true
   console.log(retryError.errors[2] === error); // true
 });
```

Returns **[function][56]** 

## sequence

Executes a list of promises and waits before previous promise was resolved.
Usefull if you want functions to be executed sequentially and hate async await loops.
In difference to queue, sequence responds a single value (the one from the last function
in the chain).

### Parameters

-   `fns` **[array][55]** , Array of functions

### Examples

```javascript
import { sequence } from 'promise-frites';
const analyticsEvents = ['UserCreated', 'InvitationEmailSent', 'UserRedirectedToApp']
 .map((event) => () => { 'send a single event to google analytics' });

Promise.resolve()
  .then(sequence(...analyticsEvents))
  .then((userRedirectedToAppResult) => console.log('All items have been saved.'));
```

## timeoutAfter

Rejects a promise after a given amount of time.
Might be used to display/log an error if an API endpoint takes longer than 5 seconds.

### Parameters

-   `seconds` **[number][53]** , number of seconds to wait until the promise is rejected with a timeout.

### Examples

```javascript
import { timeoutAfter } from 'promise-frites';

const timeoutAfter1Second = timeoutAfter(1);
const apiCall = () => { // a very slow api call };

Promise.resolve()
  .then(timeoutAfter1Second(apiCall))
  .catch((error) => error === 'timeout');
```

## waitAtLeastSeconds

Ensures that the promise takes at least a certain amount of time until it resolves.
Might be used to prevent UI flickering when the API responds very fast.

### Parameters

-   `seconds` **[number][53]** 

Returns **[function][56]** 

## withProgress

Reports the progress of a promise chain to a given callback.

### Parameters

-   `progress` **[function][56]** a callback function which reports the progress in %
-   `promises` **[array][55]** an array of functions which are called sequentially
-   `start` **[number][53]**  (optional, default `0`)
-   `end` **[number][53]**  (optional, default `1`)

### Examples

```javascript
// Simple example
import { withProgress } from 'promise-frites';

const progress = (value) => console.log(value);
withProgress(progress, [
 () => Promise.resolve(),
 () => Promise.resolve(),
 () => Promise.resolve(),
 () => Promise.resolve(),
 () => Promise.resolve(),
]);

// Result
// => 0.0
// => 0.2
// => 0.4
// => 0.6
// => 0.8
// => 1.0
```

```javascript
// a progress can have multiple subProgresses
import { withProgress } from 'promise-frites';

const progress = (value) => console.log(value);
return withProgress(progress, [
  (_, { withSubProgress }) => withSubProgress(progress, [
    () => Promise.resolve()),
    () => Promise.resolve()),
  ]),
  (_, { withSubProgress }) => withSubProgress(progress, [
    () => Promise.resolve()),
    () => Promise.resolve()),
  ]),
]);

// Result
// => 0.0
// => 0.25
// => 0.5
// => 0.75
// => 1.0
```

Returns **[Promise][57]** 

[1]: #debug

[2]: #examples

[3]: #delay

[4]: #parameters

[5]: #examples-1

[6]: #executewhenunresponsive

[7]: #parameters-1

[8]: #examples-2

[9]: #ignorerejectionfor

[10]: #parameters-2

[11]: #examples-3

[12]: #ignorereturnfor

[13]: #parameters-3

[14]: #examples-4

[15]: #inbackground

[16]: #parameters-4

[17]: #examples-5

[18]: #invert

[19]: #parameters-5

[20]: #examples-6

[21]: #parallelobject

[22]: #parameters-6

[23]: #examples-7

[24]: #parallel

[25]: #parameters-7

[26]: #createprocessingstack

[27]: #queue

[28]: #parameters-8

[29]: #examples-8

[30]: #rethrowcommonerrors

[31]: #parameters-9

[32]: #examples-9

[33]: #rethrowerror

[34]: #parameters-10

[35]: #examples-10

[36]: #rethrowifoneof

[37]: #parameters-11

[38]: #examples-11

[39]: #retry

[40]: #parameters-12

[41]: #examples-12

[42]: #sequence

[43]: #parameters-13

[44]: #examples-13

[45]: #timeoutafter

[46]: #parameters-14

[47]: #examples-14

[48]: #waitatleastseconds

[49]: #parameters-15

[50]: #withprogress

[51]: #parameters-16

[52]: #examples-15

[53]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Number

[54]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Object

[55]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Array

[56]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Statements/function

[57]: https://developer.mozilla.org/docs/Web/JavaScript/Reference/Global_Objects/Promise
